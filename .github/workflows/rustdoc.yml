{
  "name": "rustdoc",
  "on": {
    "push": {
      "branches": ["master"]
    }
  },
  "jobs": {
    "rustdoc": {
      "runs-on": "ubuntu-latest",
      "steps": [
        {
          "name": "Checkout repository",
          "uses": "actions/checkout@v2"
        },
        {
          "name": "Install Rust toolchain",
          "uses": "actions-rs/toolchain@v1",
          "with": {
            "toolchain": "stable",
            "profile": "minimal",
            "override": true,
            "components": "rustfmt, rust-src"
          }
        },
        {
          "name": "Build Documentation",
          "run": "cargo doc --all --no-deps"
        },
        {
          "name": "Deploy Docs",
          "uses": "peaceiris/actions-gh-pages@77a99cbdfe41dd761083d67b85365cf4ed3b55f6",
          "with": {
            "github_token": "${{ secrets.GITHUB_TOKEN }}",
            "publish_branch": "gh-pages",
            "publish_dir": "./target/doc",
            "force_orphan": true
          }
        }
      ]
    }
  }
}